(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{459:function(e,t,r){"use strict";r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return _})),r.d(t,"e",(function(){return j})),r.d(t,"a",(function(){return w}));r(58);var n=r(18),o=r(66),l=function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},t.prev=1,r.query?r.query.deleted=!1:r.query={deleted:!1},t.next=5,o.a.get(e,{params:r});case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))},c=function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},t.prev=1,t.next=4,o.a.get(e,{params:r});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))},d=function(e){return function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},t.prev=1,t.next=4,o.a.get(e+"/".concat(r),{params:n});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},t.prev=1,r.query?r.query.deleted=!1:r.query={deleted:!1},t.next=5,o.a.get(e+"/count",{params:r});case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))},v=function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var object,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(object=r.length>0&&void 0!==r[0]?r[0]:{},t.prev=1,!object._id){t.next=8;break}return t.next=5,o.a.patch(e+"/".concat(object._id),object);case 5:return t.abrupt("return",t.sent);case 8:return t.next=10,o.a.post(e,object);case 10:return t.abrupt("return",t.sent);case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))},m=function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var object,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return object=r.length>0&&void 0!==r[0]?r[0]:{},t.prev=1,t.next=4,o.a.patch(e+"/".concat(object._id),{deleted:!0});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",{error:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"ApiError"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))},h=function(e){var t="http://localhost:8080/api"+e;return{save:v(t),delete:m(t),getAll:c(t),get:l(t),getById:d(t),count:f(t)}},x=h("/habilidad"),y=h("/localidad"),_=h("/persona"),j=h("/trabajo"),w=(h("/agenda"),h("/comunicacion"))},461:function(e,t,r){var content=r(474);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("351d1189",content,!0,{sourceMap:!1})},463:function(e,t,r){"use strict";var n=r(494),o=r(477);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP",r="string"==typeof e?new Date(e):e;return Object(n.a)(r,t,{locale:o.a})}},467:function(e,t,r){var content=r(483);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("67187225",content,!0,{sourceMap:!1})},468:function(e,t,r){"use strict";(function(e){r(14),r(12),r(7),r(10);var n=r(3),o=(r(23),r(24),r(6),r(44),r(58),r(18)),l=r(511),c=r(492),d=r(142),f=r(471),v=r(486),m=r(478),h=r(487),x=r(488),y=r(479),_=r(459),j=r(463),w=r(175),k=r.n(w),O=r(174);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={components:{Rating:f.a,Avatar:d.a,CardChat:v.a,FieldDate:h.a,FieldTime:x.a,FieldTextArea:y.a,ModalPublicJob:m.a},filters:{camelCase:k.a},props:{trabajo:{type:Object,required:!0}},data:function(){return{showChat:!1,loading:!1,avatarError:!0,base64img:null,showModalPublic:!1,newComments:!1,form:{estado:null,fechaFin:null,notas:"",detalle:"",fechaInicio:null},showSetHours:!1,comunicaciones:[],optionsModal:!1,notesModal:!1,interval:null}},computed:{lgAndUp:function(){return this.$vuetify.breakpoint.lgAndUp},mdAndDown:function(){return this.$vuetify.breakpoint.mdAndDown},Estados:function(){return O.EstadoTrabajoLabel},realEstado:function(){var e=new Date(this.agenda.fecha_inicio);return this.trabajo.estado===O.EstadoTrabajo.PENDIENTE&&e&&Object(c.a)(Date.now(),e)?O.EstadoTrabajo.EN_PROGRESO:this.trabajo.estado},user:function(){return this.$store.state.user},estadosColor:function(){return O.EstadoTrabajoColor[this.realEstado]},estadoLabel:function(){return k()(this.realEstado)},isEstado:function(){var e={};for(var t in O.EstadoTrabajo)e[t]=this.realEstado===O.EstadoTrabajo[t];return e},isPablic:function(){return this.trabajo.tipo===O.TipoTrabajo.PUBLICO},cliente:function(){return this.trabajo.cliente},isMyPublicJob:function(){return this.isPablic&&this.profesional._id===this.user._id},profesional:function(){return this.trabajo.profesional},showAsCliente:function(){return this.cliente._id===this.$store.state.user._id},displayName:function(){var e=this.showAsCliente?"profesional":"cliente",t=this[e].nombre||"",r=this[e].apellido||"";return k()(this[e].razon_social?this[e].razon_social+"(".concat(t," ").concat(r,")"):t+" "+r)},displayPicture:function(){var e=this.showAsCliente?"profesional":"cliente";return this.trabajo[e].picture},displayEmail:function(){var e=this.showAsCliente?"profesional":"cliente";return this.trabajo[e].email},agenda:function(){var e=this.trabajo.agenda.length-1;return e>=0&&this.trabajo.agenda[e]||{}},displayFecha:function(){var e=this.agenda.fecha_inicio||this.trabajo.createdAt;return this.isPablic||this.isEstado.TERMINADO?(this.trabajo.estado?"Realizado ":"Publicado ")+Object(j.a)(e,"dd/MM/yyyy"):k()(Object(j.a)(e,"EEEE HH:mm 'hs'"))},canRating:function(){var e,t;return this.$store.state.user._id===(null===(e=this.trabajo)||void 0===e||null===(t=e.cliente)||void 0===t?void 0:t._id)},idLastChatsWithDate:function(){var e,t,r=(null===(e=this.comunicaciones)||void 0===e?void 0:e.filter((function(e){return!!e.fecha})))||[],n=r.length-1;return n>=0?null===(t=r[n])||void 0===t?void 0:t._id:null}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e,e.cancel(),e.trabajo.tipo===O.TipoTrabajo.PUBLICO){t.next=7;break}return t.next=5,r.getChat();case 5:e.newComments=!1,e.interval=setInterval((function(){try{r.getChat()}catch(e){clearInterval(this.interval)}}),1e4);case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){this.trabajo.tipo===O.TipoTrabajo.PUBLICO&&this.loadImg()},beforeDestroy:function(){clearInterval(this.interval)},methods:{goToPerfi:function(){var e=this.showAsCliente?"profesional":"cliente",t=this.trabajo[e]._id;this.$router.replace("/perfil/"+t)},openChat:function(){this.showChat=!this.showChat,this.scrollChatToBottom(),this.newComments=!1},scrollChatToBottom:function(){this.$nextTick((function(){this.$refs.chat.scrollTo(0,this.$refs.chat.clientWidth)}))},getChat:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.comunicaciones.length,t.next=3,_.a.getAll({query:{trabajo:e.trabajo._id},sort:"createdAt"});case 3:n=t.sent,data=n.data,!1===e.newComments&&(e.newComments=r<data.length),e.comunicaciones=data||[],e.page=self.numberOfPages;case 8:case"end":return t.stop()}}),t)})))()},loadImg:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$http.get("/images/jobs/".concat(t.trabajo._id,".jpeg"),{responseType:"arraybuffer"});case 3:n=r.sent,o=n.data,t.base64img="data:image/jpeg;base64,"+e.from(o,"binary").toString("base64"),t.avatarError=!1,r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),t.avatarError=!0;case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},accept:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,f,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new Date(e),o=Object(l.a)(n,3),t.loading=!0,t.trabajo.estado=O.EstadoTrabajo.PENDIENTE,c={fecha_inicio:n,fecha_fin:o},void 0===t.trabajo.agenda&&(t.trabajo.agenda=[]),t.trabajo.agenda.push(c),r.next=9,_.e.save(t.trabajo);case 9:d=r.sent,f=d.error,data=d.data,f?t.$notify({type:"error",text:f}):t.trabajo.estado=data.estado,t.loading=!1;case 14:case"end":return r.stop()}}),r)})))()},reject:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.trabajo.estado=O.EstadoTrabajo.CANCELADO,t.next=4,_.e.save(e.trabajo);case 4:r=t.sent,n=r.error,data=r.data,n?e.$notify({type:"error",text:n}):e.trabajo.estado=data.estado,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},sendComent:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.form.detalle){t.next=2;break}return t.abrupt("return");case 2:return(r={trabajo:e.trabajo._id}).detalle=e.form.detalle,e.showAsCliente?(r.to=e.trabajo.profesional,r.from=e.trabajo.cliente):(r.to=e.trabajo.cliente,r.from=e.trabajo.profesional),e.loading=!0,t.next=8,_.a.save(r);case 8:n=t.sent,data=n.data,(o=n.error)?e.$notify({type:"error",text:o}):(e.form.detalle="",e.comunicaciones.push(data),e.scrollChatToBottom()),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},sendHours:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r={trabajo:e.trabajo._id}).fecha=e.form.fechaInicio,e.showAsCliente?(r.to=e.trabajo.profesional,r.from=e.trabajo.cliente):(r.to=e.trabajo.cliente,r.from=e.trabajo.profesional),e.loading=!0,t.next=6,_.a.save(r);case 6:n=t.sent,data=n.data,(o=n.error)?e.$notify({type:"error",text:o}):(e.form.fecha=new Date,e.comunicaciones.push(data),e.showSetHours=!1,e.scrollChatToBottom()),e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},updateTrabajo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.trabajo.estado=e.form.estado,e.trabajo.notas=e.form.notas,e.trabajo.agenda.push({fecha_inicio:e.form.fechaInicio,fecha_fin:e.form.fechaFin}),t.next=6,_.e.save(e.trabajo);case 6:r=t.sent,n=r.error,data=r.data,n?e.$notify({type:"error",text:n}):(e.trabajo.estado=data.estado,e.$notify({type:"success",text:"Trabajo actualizado."}),e.$emit("change"),e.cancel()),e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},cancel:function(){this.optionsModal=!1,this.notesModal=!1,this.trabajo.oldEstado=this.trabajo.estado,this.form={estado:this.trabajo.estado,notas:this.trabajo.notas,fechaInicio:this.agenda.fecha_inicio?new Date(this.agenda.fecha_inicio):new Date,fechaFin:this.agenda.fecha_fin?new Date(this.agenda.fecha_fin):new Date,detalle:""}},addNotes:function(){this.notesModal=!0},markAsDone:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(r=E({},e.trabajo)).oldEstado=e.trabajo.estado,r.estado=O.EstadoTrabajo.TERMINADO,t.next=6,_.e.save(r);case 6:n=t.sent,(o=n.error)?e.$notify({type:"error",text:o}):(e.$notify({type:"success",text:"Trabajo actualizado."}),e.$emit("change"),e.cancel()),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},saveRating:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,t.trabajo.rating=e,r.next=4,_.e.save(t.trabajo);case 4:n=r.sent,(o=n.error)?t.$notify({type:"error",text:o}):(t.$notify({type:"success",text:"Gracias por puntuar."}),t.$emit("change"),t.cancel()),t.loading=!1;case 8:case"end":return r.stop()}}),r)})))()},publish:function(){this.$emit("change"),this.loadImg()}}}}).call(this,r(269).Buffer)},469:function(e,t,r){var content=r(485);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("059b7521",content,!0,{sourceMap:!1})},471:function(e,t,r){"use strict";r(20);var n=r(174),o={props:{value:{type:[String,Number],default:0},editable:{type:Boolean,default:!1},star:{type:Boolean,default:!1},size:{type:[String,Number],default:0}},data:function(){return{}},computed:{upIcon:function(){return{color:this.value===n.RatingTrabajo.LIKE||this.value>=50&&this.value>0?"blue lighten-2":"grey lighten-1",size:this.size||(this.value>=50?42:32)}},downIcon:function(){return{color:this.value===n.RatingTrabajo.DONT_LIKE||this.value<=50&&this.value>0?"red lighten-2":"grey lighten-1",size:this.size||(this.value>=50?42:32)}},starValue:function(){return 5*this.value}},methods:{emit:function(e){this.$emit("change",e?n.RatingTrabajo.LIKE:n.RatingTrabajo.DONT_LIKE)}}},l=(r(473),r(27)),c=r(42),d=r.n(c),f=r(81),v=r(453),m=r(108),h=r(450),x=r(531),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.star?r("v-rating",{attrs:{value:e.starValue,"half-increments":"",color:"amber","half-icon":"star_half","background-color":"grey",readonly:"",dense:"",size:"32"}}):[e.editable?r("v-layout",{attrs:{"justify-center":"","align-center":""}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-btn",{staticClass:"mx-2",attrs:{text:"",icon:"",color:n?"blue":e.upIcon.color},on:{click:function(t){return e.emit(!0)}}},[r("v-icon",[e._v("mdi-thumb-up")])],1)]}}],null,!1,550231098)}),e._v(" "),r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-btn",{staticClass:"mx-2",attrs:{text:"",icon:"",color:n?"red":e.downIcon.color},on:{click:function(t){return e.emit(!1)}}},[r("v-icon",[e._v("mdi-thumb-down")])],1)]}}],null,!1,2171925500)})],1):r("v-layout",{attrs:{"justify-center":"","align-center":""}},[r("v-icon",{staticClass:"ma-2 px-1",attrs:{size:e.upIcon.size,color:e.upIcon.color}},[e._v("\n        mdi-thumb-up\n      ")]),e._v(" "),r("v-icon",{staticClass:"ma-2 px-1",attrs:{size:e.downIcon.size,color:e.downIcon.color}},[e._v("\n        mdi-thumb-down\n      ")])],1)]],2)}),[],!1,null,"96c43008",null);t.a=component.exports;d()(component,{VBtn:f.a,VHover:v.a,VIcon:m.a,VLayout:h.a,VRating:x.a})},473:function(e,t,r){"use strict";var n=r(461);r.n(n).a},474:function(e,t,r){(t=r(15)(!1)).push([e.i,".logo[data-v-96c43008]{margin:2px 0 0;height:42px}",""]),e.exports=t},478:function(e,t,r){"use strict";r(14),r(12),r(7),r(6),r(10),r(58);var n=r(18),o=r(3),l=r(212),c=r(220),d=r(174),f=r(459),v=r(218);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var h=Object(v.a)("progressFileUpload").trabajo,x={components:{CardForm:l.a,CardCropper:c.a},props:{trabajo:{type:Object,default:function(){return{}}},value:{type:Boolean,default:!1}},data:function(){return{loading:!1,pickupImg:!1,localidades:[],habilidades:[],form:{},pickedFile:null}},computed:{user:function(){return this.$store.state.user}},watch:{trabajo:function(e){var t,r;(this.close(!0),null===(t=this.trabajo)||void 0===t?void 0:t._id)?this.form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.trabajo):this.form.localidad=null===(r=this.user.localidad)||void 0===r?void 0:r._id}},created:function(){},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.c.getAll();case 2:r=t.sent,n=r.data,e.localidades=n||[],e.habilidades=e.$store.state.user.servicios||[];case 6:case"end":return t.stop()}}),t)})))()},methods:{saveTrabajoImg:function(e){var t=e.file,r=e.fileName;this.pickedFile=t,this.form.fileName=r,this.pickupImg=!1},saveTrabajo:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l,c,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(t.loading=!0,t.form.tipo=d.TipoTrabajo.PUBLICO,t.form.descripcion_breve=t.form.descripcion_breve.toLowerCase(),!t.pickedFile){r.next=13;break}return r.next=8,h(t.pickedFile,t.form);case 8:o=r.sent,l=o.error,n=l,r.next=18;break;case 13:return r.next=15,f.e.save(t.form);case 15:c=r.sent,v=c.error,n=v;case 18:n?t.$notify({type:"error",text:n.message||n}):(t.$notify({type:"success",text:"Trabajo actualizado."}),t.close()),t.loading=!1;case 20:case"end":return r.stop()}}),r)})))()},close:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.$emit("input",!1),this.$emit("change",this.form)),this.pickedFile=null,this.pickupImg=!1,this.form={estado:d.EstadoTrabajo.TERMINADO,tipo:d.TipoTrabajo.PUBLICO,fileName:"",localidad:{},servicios:[],descripcion_breve:"",descripcion:""}},delJob:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,f.e.delete(e.trabajo);case 3:r=t.sent,(n=r.error)?e.$notify({type:"error",text:n.message||n}):(e.$notify({type:"success",text:"Trabajo eliminado."}),e.close()),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}},y=r(27),_=r(42),j=r.n(_),w=r(81),k=r(211),O=r(449),C=r(450),E=r(572),P=r(158),T=r(544),component=Object(y.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"550",persistent:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("CardForm",{on:{submit:e.saveTrabajo},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Publicar trabajo")]},proxy:!0},{key:"default",fn:function(t){var n=t.rules;return[r("v-flex",{attrs:{xs12:"","mx-2":""}},[r("v-text-field",{attrs:{dense:"","hide-details":"",label:"Titulo o Descripción breve",outlined:"",readonly:e.loading,counter:"",rules:[n.required(),n.max(120)]},model:{value:e.form.descripcion_breve,callback:function(t){e.$set(e.form,"descripcion_breve",t)},expression:"form.descripcion_breve"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":""}},[r("v-select",{attrs:{dense:"","hide-details":"",items:e.habilidades,"item-text":"nombre","item-value":"_id",label:"Habilidad",loading:0===e.habilidades.length,multiple:"",outlined:"",readonly:e.loading,rules:[n.required()]},model:{value:e.form.servicios,callback:function(t){e.$set(e.form,"servicios",t)},expression:"form.servicios"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":""}},[r("v-select",{attrs:{dense:"","hide-details":"",items:e.localidades,"item-text":"nombre","item-value":"_id",label:"Localidad",loading:0===e.localidades.length,outlined:"",readonly:e.loading,rules:[n.required()]},model:{value:e.form.localidad,callback:function(t){e.$set(e.form,"localidad",t)},expression:"form.localidad"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":""}},[r("v-textarea",{attrs:{"auto-grow":"",counter:"500",dense:"",label:"Descripción",outlined:"",readonly:e.loading,rules:[n.max(500)]},model:{value:e.form.descripcion,callback:function(t){e.$set(e.form,"descripcion",t)},expression:"form.descripcion"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":""}},[r("v-layout",{attrs:{"align-center":""}},[r("v-btn",{attrs:{depressed:"",color:"secondary",disabled:e.loading},on:{click:function(t){t.stopPropagation(),e.pickupImg=!0}}},[e._v("\n            Elegir foto\n          ")]),e._v(" "),r("p",{staticClass:"mb-0 mx-4",domProps:{textContent:e._s(e.form.fileName)}}),e._v(" "),r("CardCropper",{attrs:{on:e.pickupImg},on:{"update:on":function(t){e.pickupImg=t},submit:e.saveTrabajoImg}})],1)],1)]}},{key:"actions-left",fn:function(){return[e.trabajo._id?r("v-btn",{attrs:{color:"red darken-4",text:""},on:{click:function(t){return e.delJob()}}},[e._v("\n        Eliminar\n      ")]):e._e()]},proxy:!0},{key:"actions",fn:function(){return[r("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:function(t){return e.close()}}},[e._v("Cancelar ")]),e._v(" "),r("v-btn",{attrs:{disabled:e.loading,color:"primary",type:"submit"}},[e._v("\n        "+e._s(e.form._id?"Guardar":"Publicar")+"\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null);t.a=component.exports;j()(component,{VBtn:w.a,VDialog:k.a,VFlex:O.a,VLayout:C.a,VSelect:E.a,VTextField:P.a,VTextarea:T.a})},479:function(e,t,r){"use strict";var n=r(219),o={components:{TiptapVuetify:n.l},props:{disabled:{type:Boolean,default:!1},value:{type:[Date,String],default:""},heading:{type:Boolean,default:!1},placeholder:{type:String,default:"Escribe un mensaje."},required:{type:Boolean,default:!1}},data:function(){return{content:""}},computed:{extensions:function(){var e=[n.a,n.n,n.k,n.g,n.h,n.c,n.i,n.b,n.f,n.j,n.d];return this.heading&&e.push([n.e,{options:{levels:[1,2]}}]),e}},watch:{content:function(e){this.$emit("input",e)}},created:function(){this.content=this.value},mounted:function(){},methods:{}},l=(r(482),r(27)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("tiptap-vuetify",{attrs:{extensions:e.extensions,placeholder:e.placeholder,"card-props":{outlined:!0}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})}),[],!1,null,null,null);t.a=component.exports},482:function(e,t,r){"use strict";var n=r(467);r.n(n).a},483:function(e,t,r){(t=r(15)(!1)).push([e.i,".tiptap-vuetify-editor .ProseMirror{margin:10px!important}.tiptap-vuetify-editor div.v-card.v-card--outlined.v-sheet.theme--light div.tiptap-vuetify-editor__content div.ProseMirror{max-height:200px;height:100px}",""]),e.exports=t},484:function(e,t,r){"use strict";var n=r(469);r.n(n).a},485:function(e,t,r){(t=r(15)(!1)).push([e.i,"div.chat-box[data-v-0a725862]{box-shadow:inset 0 0 3px rgba(0,0,0,.3);overflow-y:scroll;height:260px}",""]),e.exports=t},486:function(e,t,r){"use strict";var n=r(463),o=r(514),l=r(477),c={components:{},props:{chat:{type:Object,required:!0},editable:{type:Boolean,default:!0}},data:function(){return{}},computed:{isFrom:function(){var e,t=this.$store.state.user._id;return this.chat.from===t||(null===(e=this.chat.from)||void 0===e?void 0:e._id)===t},fechText:function(){return Object(n.a)(this.chat.fecha,"dd 'de' MMMM 'a las' HH:mm 'hs'")},fecha:function(){return e=this.chat.createdAt,t="string"==typeof e?new Date(e):e,Object(o.a)(t,{locale:l.a,addSuffix:!0});var e,t}},methods:{accept:function(){this.$emit("accept",this.chat.fecha)}}},d=r(27),f=r(42),v=r.n(f),m=r(81),h=r(101),x=r(39),y=r(450),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{wrap:"","align-center":"","justify-end":e.isFrom,"mt-2":""}},[r("div",{staticClass:"hidden-md-and-down"},[e.isFrom?r("p",{staticClass:"caption grey--text mb-0 mr-2",domProps:{textContent:e._s(e.fecha)}}):e._e()]),e._v(" "),r("v-card",{class:{"green lighten-5":e.isFrom}},[r("v-card-text",{staticClass:"py-1"},[e.chat.fecha?r("v-layout",{attrs:{column:""}},[r("p",{staticClass:"mb-1"},[e._v("\n          ¿Te parece una cita para el\n          "),r("span",{staticClass:"body-1 font-weight-black"},[e._v(e._s(e.fechText))]),e._v(" ?\n        ")]),e._v(" "),e.isFrom?e._e():r("v-btn",{staticClass:"mb-1",attrs:{disabled:!e.editable,color:"teal",text:""},on:{click:e.accept}},[e._v("\n          Concretar la cita\n        ")])],1):r("p",{staticClass:"mb-0",domProps:{textContent:e._s(e.chat.detalle)}})],1)],1),e._v(" "),r("div",{staticClass:"hidden-md-and-down"},[e.isFrom?e._e():r("p",{staticClass:"caption grey--text mb-0 ml-2",domProps:{textContent:e._s(e.fecha)}})])],1)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VBtn:m.a,VCard:h.a,VCardText:x.b,VLayout:y.a})},487:function(e,t,r){"use strict";r(44),r(59);var n=r(35),o=(r(20),r(463)),l=r(213),c={props:{label:String,disabled:{type:Boolean,default:!1},resetHours:{type:Boolean,default:!1},hideDetails:Boolean,value:[Date,String],index:[Number,String],clearable:{type:Boolean,default:!1},onlyAdult:{type:Boolean,default:!1},required:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},startOnYear:{type:Boolean,default:!1},min:String,max:String},data:function(){return{date:"",menu:""}},computed:{formRules:function(){return l.a},color:function(){return this.disabled?"black":"primary"},rule:function(){var e=[];return this.required&&e.push(this.formRules.required()),this.onlyAdult&&e.push(this.isAdult),e},isAdult:function(){return this.date instanceof Date&&((new Date).setFullYear((new Date).getFullYear()-18)>this.date.getTime()||"Para usar Casilda Emprende tienes que tener más de 18 años.")},parseDate:{get:function(){var e=this.value;return e?new Date(e).toISOString().substr(0,10):null},set:function(e){if(e){var t=e.replace(/T\d+:\d+:\d+.\d+\+\d+$/,"").split("-"),r=Object(n.a)(t,3),o=r[0],l=r[1],c=r[2],d=new Date;d.setFullYear(o),d.setMonth(l-1),d.setDate(c),this.resetHours&&this.value?d.setHours(0,0,0,0):d.setHours(this.value.getHours(),this.value.getMinutes()),this.date=d}}},input:{get:function(){var e=this.value;return e?Object(o.a)(e,"dd/MM/yyyy"):null},set:function(e){this.date=e?new Date(e):null}}},watch:{menu:function(e){var t=this;this.startOnYear&&e&&!this.date&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}),100)},date:function(e){this.$emit("input",e)}},created:function(){this.data=this.value},mounted:function(){this.$refs.menu.save(this.value)},methods:{saveDate:function(e){this.$refs.menu.save(e)},clear:function(){this.$emit("input",null)}}},d=r(27),f=r(42),v=r.n(f),m=r(579),h=r(441),x=r(158),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px",disabled:e.disabled,"offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-text-field",e._g({staticClass:"pt-0",attrs:{index:e.index,label:e.label,"hide-details":e.hideDetails,clearable:e.clearable,"prepend-icon":"event",dense:e.dense,color:e.color,readonly:"",rules:e.rule},on:{"click:clear":e.clear},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),r("v-date-picker",{ref:"picker",attrs:{locale:"es",min:e.min,max:e.max},on:{change:e.saveDate},model:{value:e.parseDate,callback:function(t){e.parseDate=t},expression:"parseDate"}})],1)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VDatePicker:m.a,VMenu:h.a,VTextField:x.a})},488:function(e,t,r){"use strict";r(59);var n=r(35),o=(r(20),r(463)),l=r(213),c={props:{label:String,disabled:{type:Boolean,default:!1},hideDetails:Boolean,value:[Date,String],index:[Number,String],clearable:{type:Boolean,default:!1},required:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},min:String,max:String},data:function(){return{date:"",input:"",menu:""}},computed:{formRules:function(){return l.a},color:function(){return this.disabled?"black":"primary"},rule:function(){var e=[];return this.required&&e.push(this.formRules.required()),e},parseDate:{get:function(){var e=this.value;return e?Object(o.a)(e,"HH:mm"):null},set:function(e){if(e){var t=e.split(":"),r=Object(n.a)(t,2),o=r[0],l=r[1],c=this.value;c.setHours(o,l,0,0),this.input=e,this.date=c}}}},watch:{date:function(e){this.$emit("input",e)},value:function(e){this.input=Object(o.a)(e,"HH:mm")}},created:function(){},mounted:function(){this.input=Object(o.a)(this.value,"HH:mm")},methods:{saveHora:function(e){this.$refs.menu.save(e)},clear:function(){this.$emit("input",null)}}},d=r(27),f=r(42),v=r.n(f),m=r(441),h=r(158),x=r(589),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px",disabled:e.disabled,"offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-text-field",e._g({staticClass:"pt-0",attrs:{index:e.index,label:e.label,"hide-details":e.hideDetails,clearable:e.clearable,"prepend-icon":"alarm",dense:e.dense,color:e.color,readonly:"",rules:e.rule},on:{"click:clear":e.clear},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),r("v-time-picker",{attrs:{locale:"es",format:"24hr","full-width":"",min:e.min,max:e.max},on:{"click:minute":e.saveHora},model:{value:e.parseDate,callback:function(t){e.parseDate=t},expression:"parseDate"}})],1)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VMenu:m.a,VTextField:h.a,VTimePicker:x.a})},489:function(e,t,r){"use strict";var n=r(468).a,o=(r(484),r(27)),l=r(42),c=r.n(l),d=r(590),f=r(81),v=r(101),m=r(39),h=r(498),x=r(211),y=r(103),_=r(449),j=r(453),w=r(108),k=r(138),O=r(450),C=r(197),E=r(572),P=r(210),T=r(158),R=r(434),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-dialog",{attrs:{"max-width":"500",persistent:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.notesModal,callback:function(t){e.notesModal=t},expression:"notesModal"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Notas privadas")]),e._v(" "),r("v-card-text",{staticClass:"pb-0 px-2"},[r("FieldTextArea",{attrs:{heading:""},model:{value:e.form.notas,callback:function(t){e.$set(e.form,"notas",t)},expression:"form.notas"}})],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.updateTrabajo()}}},[e._v("Aceptar")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"350",persistent:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.optionsModal,callback:function(t){e.optionsModal=t},expression:"optionsModal"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Opciones")]),e._v(" "),r("v-card-text",{staticClass:"pb-0"},[r("p",[e._v("\n          Para cambiar la fecha de la cita, cambie el estado a\n          "),r("a",{on:{click:function(t){t.stopPropagation(),e.form.estado="CONSULTA"}}},[e._v("CONSULTA")]),e._v("\n          y acuerde otra fecha con el cliente.\n        ")]),e._v(" "),r("p",{staticClass:"mb-2 mt-2"},[e._v("Cambiar el estado del trabajo")]),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-select",{staticClass:"pt-0",attrs:{dense:"","hide-details":"",items:e.Estados,"item-text":"label","item-value":"key",label:"Estado",outlined:"",readonly:e.loading},model:{value:e.form.estado,callback:function(t){e.$set(e.form,"estado",t)},expression:"form.estado"}})],1),e._v(" "),r("p",{staticClass:"mb-0 mt-2"},[e._v("Cambiar la duración del trabajo.")]),e._v(" "),r("v-layout",[r("FieldDate",{attrs:{disabled:"CONSULTA"===e.form.estado,min:(new Date).toISOString().substr(0,10)},model:{value:e.form.fechaFin,callback:function(t){e.$set(e.form,"fechaFin",t)},expression:"form.fechaFin"}}),e._v(" "),r("FieldTime",{attrs:{disabled:"CONSULTA"===e.form.estado},model:{value:e.form.fechaFin,callback:function(t){e.$set(e.form,"fechaFin",t)},expression:"form.fechaFin"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.updateTrabajo()}}},[e._v("Aceptar")])],1)],1)],1),e._v(" "),r("ModalPublicJob",{attrs:{trabajo:e.trabajo},on:{change:function(t){return e.publish()}},model:{value:e.showModalPublic,callback:function(t){e.showModalPublic=t},expression:"showModalPublic"}}),e._v(" "),r("v-hover",{attrs:{"open-delay":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-card",{staticClass:"my-4",attrs:{outlined:"",elevation:n?1:0}},[e.isPablic?e._e():r("v-card-title",{staticClass:"pb-0"},[r("v-layout",{attrs:{wrap:""}},[r("v-layout",{attrs:{"align-center":""}},[r("Avatar",{staticClass:"ma-2",attrs:{size:"64",src:e.displayPicture}}),e._v(" "),r("v-flex",[r("v-layout",{attrs:{column:""}},[r("a",{staticClass:"title mb-0",on:{click:e.goToPerfi}},[e._v(e._s(e.displayName))]),e._v(" "),r("span",{staticClass:"body-1",domProps:{textContent:e._s(e.displayEmail)}})])],1)],1),e._v(" "),r("v-layout",{attrs:{column:"","justify-start":"","align-end":"","fill-height":""}},[r("v-chip",{attrs:{outlined:"",color:e.estadosColor,small:""},domProps:{textContent:e._s(e.estadoLabel)}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.isEstado.PENDIENTE||e.isEstado.EN_PROGRESO,expression:"isEstado.PENDIENTE || isEstado.EN_PROGRESO"}],staticClass:"mb-0 mt-2 display-1 font-weight-black"},[e._v("\n              "+e._s(e.displayFecha)+"\n            ")])],1)],1)],1),e._v(" "),r("v-card-text",{class:{"pb-0":!e.isPablic}},[r("v-layout",{attrs:{column:e.$vuetify.breakpoint.smAndDown}},[e.isPablic?r("v-flex",{staticClass:"grey lighten-3 d-inline-flex xs12 md4"},[e.avatarError?r("div",{staticStyle:{height:"225px",display:"flex",flex:"auto"}},[r("v-icon",{staticStyle:{margin:"auto"},attrs:{size:"128"}},[e._v("wallpaper")])],1):r("v-img",{attrs:{src:e.base64img,height:"225",width:"225","aspect-ratio":"1"}})],1):e._e(),e._v(" "),r("v-flex",{attrs:{xs12:"",md8:e.isPablic}},[r("v-layout",{attrs:{column:"","pl-4":"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","mb-2":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{staticClass:"flex-row text-no-wrap",attrs:{"align-center":"","fill-height":""}},[r("p",{staticClass:"headline black--text text-truncate mb-0"},[e._v("\n                      "+e._s(e._f("camelCase")(e.trabajo.descripcion_breve))+"\n                    ")])])],1),e._v(" "),e.isMyPublicJob?r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:"",text:""},on:{click:function(t){return e.$emit("edit",e.trabajo)}}},n),[r("v-icon",[e._v("edit")])],1)]}}],null,!0)},[e._v("\n                  Editar trabajo\n                ")]):e._e()],1),e._v(" "),r("v-layout",{attrs:{column:"","fill-height":"","align-start":""}},[r("p",{domProps:{textContent:e._s(e.trabajo.descripcion)}})]),e._v(" "),r("v-layout",{attrs:{"align-center":""}},[r("v-flex",e._l(e.trabajo.servicios,(function(t,n){return r("v-chip",{key:n,attrs:{outlined:""},domProps:{textContent:e._s(t.nombre)}})})),1),e._v(" "),e.isEstado.TERMINADO&&e.trabajo.cliente?r("v-flex",{attrs:{xs12:"",md4:""}},[r("v-layout",{attrs:{"justify-end":"","align-start":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("div",e._g({},n),[r("Rating",{attrs:{value:e.trabajo.rating,size:"22",editable:e.canRating},on:{change:e.saveRating}})],1)]}}],null,!0)},[e._v("\n                      Opinion del cliente\n                    ")])],1)],1):e._e()],1),e._v(" "),e.isEstado.TERMINADO?r("v-layout",{attrs:{"align-center":""}},[r("v-flex",[e._v(" "+e._s(e.displayFecha)+" ")])],1):e._e()],1)],1)],1)],1),e._v(" "),e.isPablic?e._e():r("v-card-actions",{staticClass:"px-4 pb-4"},[r("v-layout",{attrs:{"align-center":""}},[e.isEstado.CONSULTA?r("v-btn",{attrs:{color:"red darken-4",text:""},on:{click:e.reject}},[e._v("\n            "+e._s(e.showAsCliente?"Cancelar":"Rechazar")+"\n          ")]):e._e(),e._v(" "),e.showAsCliente||!e.isEstado.PENDIENTE&&!e.isEstado.EN_PROGRESO?e._e():[e.mdAndDown?r("v-btn",{attrs:{color:"teal",icon:""},on:{click:function(t){t.stopPropagation(),e.optionsModal=!0}}},[r("v-icon",[e._v("edit")])],1):r("v-btn",{attrs:{color:"teal",outlined:""},on:{click:function(t){t.stopPropagation(),e.optionsModal=!0}}},[e._v("\n              Opciones\n            ")])],e._v(" "),!e.showAsCliente&&e.isEstado.EN_PROGRESO?[e.mdAndDown?r("v-btn",{attrs:{color:"deep-purple",icon:""},on:{click:e.markAsDone}},[r("v-icon",[e._v("done")])],1):r("v-btn",{staticClass:"mx-2",attrs:{color:"deep-purple",text:""},on:{click:e.markAsDone}},[e._v("\n              Trabajo terminado\n            ")])]:e._e(),e._v(" "),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.showAsCliente&&e.isEstado.TERMINADO,expression:"!showAsCliente && isEstado.TERMINADO"}],staticClass:"mx-2",attrs:{text:""},on:{click:function(t){t.stopPropagation(),e.showModalPublic=!0}}},[e._v("\n            Publicar\n          ")]),e._v(" "),r("v-layout",{attrs:{"align-center":"","justify-end":""}},[e.showAsCliente?e._e():r("v-btn",{staticClass:"mx-2",attrs:{color:"primary",text:""},on:{click:e.addNotes}},[e._v("\n              Notas\n            ")]),e._v(" "),r("v-badge",{attrs:{color:"error",overlap:"",value:e.newComments}},[r("v-btn",{attrs:{color:"black",outlined:""},on:{click:e.openChat}},[e.showChat?r("v-icon",{attrs:{left:""}},[e._v("keyboard_arrow_down")]):r("v-icon",{attrs:{left:""}},[e._v("keyboard_arrow_up")]),e._v("\n                Chat\n              ")],1)],1)],1)],2)],1),e._v(" "),r("v-expand-transition",[r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:e.showChat,expression:"showChat"}],staticClass:"pt-0"},[r("div",{ref:"chat",staticClass:"grey lighten-4 mb-3 pa-4 chat-box"},[0===e.comunicaciones.length?r("v-layout",{attrs:{column:"","fill-height":"","align-center":"","justify-center":""}},[r("v-icon",{attrs:{size:"96"}},[e._v("mail")]),e._v(" "),e.loading?r("v-progress-linear",{attrs:{indeterminate:"",active:"",color:"black"}}):r("p",{staticClass:"headline"},[e._v("Sin mensajes.")])],1):e._e(),e._v(" "),e._l(e.comunicaciones,(function(t,i){return r("CardChat",{key:i,attrs:{editable:e.isEstado.CONSULTA&&e.idLastChatsWithDate===t._id,chat:t},on:{accept:e.accept}})})),e._v(" "),r("div",{staticClass:"mb-4"})],2),e._v(" "),r("v-layout",{directives:[{name:"show",rawName:"v-show",value:!e.isEstado.CANCELADO,expression:"!isEstado.CANCELADO"}]},[r("v-flex",{attrs:{xs12:"","mt-2":""}},[r("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.showSetHours,expression:"showSetHours"}],attrs:{wrap:"","mx-12":"","justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[r("FieldDate",{attrs:{"hide-details":"",min:(new Date).toISOString().substr(0,10)},model:{value:e.form.fechaInicio,callback:function(t){e.$set(e.form,"fechaInicio",t)},expression:"form.fechaInicio"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[r("FieldTime",{attrs:{"hide-details":""},model:{value:e.form.fechaInicio,callback:function(t){e.$set(e.form,"fechaInicio",t)},expression:"form.fechaInicio"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[r("v-btn",{staticClass:"ml-2",attrs:{color:"primary",outlined:""},on:{click:e.sendHours}},[e._v("\n                    Proponer fecha\n                  ")])],1)],1),e._v(" "),r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!e.showSetHours,expression:"!showSetHours"}],attrs:{dense:"","hide-details":"",outlined:"",readonly:e.loading,"append-icon":"send",autocomplete:"off"},on:{"click:append":e.sendComent,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendComent(t)}},model:{value:e.form.detalle,callback:function(t){e.$set(e.form,"detalle",t)},expression:"form.detalle"}})],1),e._v(" "),r("v-layout",{attrs:{column:"","align-center":"","mx-2":"","mt-2":"","ml-2":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{disabled:!e.isEstado.CONSULTA,color:"teal",icon:""},on:{click:function(t){t.stopPropagation(),e.showSetHours=!e.showSetHours}}},n),[e.showSetHours?r("v-icon",[e._v("keyboard")]):r("v-icon",[e._v("insert_invitation")])],1)]}}],null,!0)},[e._v(" "),e.showSetHours?r("span",[e._v("Volver al teclado")]):r("span",[e._v("Proponer una fecha para la cita")])])],1)],1)],1)],1)],1)]}}])})],1)}),[],!1,null,"0a725862",null);t.a=component.exports;c()(component,{VBadge:d.a,VBtn:f.a,VCard:v.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VChip:h.a,VDialog:x.a,VExpandTransition:y.a,VFlex:_.a,VHover:j.a,VIcon:w.a,VImg:k.a,VLayout:O.a,VProgressLinear:C.a,VSelect:E.a,VSpacer:P.a,VTextField:T.a,VTooltip:R.a})},495:function(e,t,r){"use strict";r(58);var n=r(18),o=r(459),l=r(212),c=r(174),d=r(175),f=r.n(d),v={components:{CardForm:l.a},props:{perfil:{type:Object,required:!0},value:{type:Boolean,default:!1}},data:function(){return{loading:!1,form:{profesional:{}}}},computed:{user:function(){return this.$store.state.user},headline:function(){return f()(this.perfil.razon_social?this.perfil.razon_social+"(".concat(this.perfil.nombre," ").concat(this.perfil.apellido,")"):this.perfil.nombre+" "+this.perfil.apellido)}},created:function(){this.close(!0)},mounted:function(){},methods:{submit:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return t.loading=!0,r.next=5,o.e.save(t.form);case 5:n=r.sent,(l=n.error)?t.$notify({type:"error",text:l}):(t.$notify({type:"success",text:"Listo, esperando respuesta de "+t.perfil.nombre}),t.close()),t.loading=!1;case 9:case"end":return r.stop()}}),r)})))()},close:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.$emit("input",!1),this.$emit("change",this.form)),this.form={cliente:this.user._id,profesional:this.perfil,localidad:this.user.localidad,tipo:c.TipoTrabajo.PRIVADO,descripcion:"",descripcion_breve:"",servicios:this.form.servicios}}}},m=r(27),h=r(42),x=r.n(h),y=r(81),_=r(211),j=r(449),w=r(572),k=r(158),O=r(544),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"550",persistent:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("CardForm",{on:{submit:e.submit},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Contratar con "+e._s(e.headline))]},proxy:!0},{key:"default",fn:function(t){var n=t.rules;return[r("p",[e._v("\n        Cuente, describa la tarea a realizar, el problema, para que necesita\n        los servicios del profesional.\n      ")]),e._v(" "),r("v-flex",{attrs:{xs12:"","mt-2":""}},[r("v-text-field",{attrs:{dense:"","hide-details":"",label:"Asunto",outlined:"",readonly:e.loading,counter:"",rules:[n.required(),n.max(120)]},model:{value:e.form.descripcion_breve,callback:function(t){e.$set(e.form,"descripcion_breve",t)},expression:"form.descripcion_breve"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","mt-2":""}},[r("v-textarea",{attrs:{"auto-grow":"",counter:"500",dense:"",label:"Descripción",outlined:"",readonly:e.loading,rules:[n.max(500),n.required()]},model:{value:e.form.descripcion,callback:function(t){e.$set(e.form,"descripcion",t)},expression:"form.descripcion"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"","mt-2":""}},[r("v-select",{attrs:{dense:"","hide-details":"",items:e.form.profesional.servicios,"item-text":"nombre","item-value":"_id",label:"Profesiones",disabled:0===e.form.profesional.servicios.length,multiple:"",outlined:"",readonly:e.loading,rules:[n.required()]},model:{value:e.form.servicios,callback:function(t){e.$set(e.form,"servicios",t)},expression:"form.servicios"}})],1)]}},{key:"actions",fn:function(){return[r("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:function(t){return e.close()}}},[e._v("Cancelar ")]),e._v(" "),r("v-btn",{attrs:{disabled:e.loading,color:"primary",type:"submit"}},[e._v("\n        Contratar\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null);t.a=component.exports;x()(component,{VBtn:y.a,VDialog:_.a,VFlex:j.a,VSelect:w.a,VTextField:k.a,VTextarea:O.a})},507:function(e,t,r){"use strict";var strong=r(270),n=r(215);e.exports=r(271)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return strong.def(n(this,"Set"),e=0===e?0:e,e)}},strong)},515:function(e,t,r){"use strict";r(14),r(12),r(10),r(7),r(6),r(507),r(58);var n=r(18),o=(r(60),r(69),r(3)),l=(r(28),r(34),r(479)),c=r(212),d=r(174),f=r(459);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var m={components:{FieldTextArea:l.a,CardForm:c.a},props:{loadLikeProfessional:{type:Boolean,default:!1}},data:function(){return{loading:!1,form:{roles:[]},habilidades:[],localidades:[]}},computed:{user:function(){return this.$store.state.user},isAProfessional:function(){var e;return null===(e=this.form.roles)||void 0===e?void 0:e.includes(d.Roles.PROFESIONAL)}},created:function(){this.form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.user),this.loadLikeProfessional?(this.form.show_tutorial=!1,this.form.roles=[d.Roles.CLIENTE,d.Roles.PROFESIONAL]):this.form.roles=Array.from(this.user.roles)},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.c.getAll();case 2:return r=t.sent,n=r.data,e.localidades=n||[],t.next=7,f.b.getAll();case 7:o=t.sent,l=o.data,e.habilidades=l||[];case 10:case"end":return t.stop()}}),t)})))()},methods:{setLikeProfesional:function(){var e=new Set(this.user.roles);e.add(d.Roles.PROFESIONAL),e.delete(d.Roles.CLIENTE),this.form.roles=Array.from(e)},setLikeCliente:function(){var e=new Set(this.user.roles);e.add(d.Roles.CLIENTE),e.delete(d.Roles.PROFESIONAL),this.form.roles=Array.from(e)},submit:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return t.loading=!0,r.next=5,f.d.save(t.form);case 5:n=r.sent,(o=n.error)?t.$notify({type:"error",text:o}):t.$emit("submit",t.form),t.loading=!1;case 9:case"end":return r.stop()}}),r)})))()},close:function(){this.$emit("close")}}},h=r(27),x=r(42),y=r.n(x),_=r(81),j=r(449),w=r(108),k=r(450),O=r(572),C=r(158),E=r(434),component=Object(h.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CardForm",{on:{submit:e.submit},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Perfil")]},proxy:!0},{key:"default",fn:function(t){var n=t.rules;return[r("v-layout",{attrs:{"mt-2":""}},[r("v-flex",{attrs:{xs12:"",lg6:"","mx-2":""}},[r("v-text-field",{attrs:{dense:"","hide-details":"",label:"Nombre",outlined:"",readonly:e.loading,rules:[n.required(),n.alphaSpaces()]},model:{value:e.form.nombre,callback:function(t){e.$set(e.form,"nombre",t)},expression:"form.nombre"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",lg6:"","mx-2":""}},[r("v-text-field",{attrs:{dense:"","hide-details":"",label:"Apellido",outlined:"",readonly:e.loading,rules:[n.required(),n.alphaSpaces()]},model:{value:e.form.apellido,callback:function(t){e.$set(e.form,"apellido",t)},expression:"form.apellido"}})],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":"","mt-2":""}},[r("v-select",{attrs:{dense:"","hide-details":"",items:e.localidades,"item-text":"nombre","item-value":"_id",label:"Localidad",loading:0===e.localidades.length,"return-object":"",outlined:"",readonly:e.loading,rules:[n.required()]},model:{value:e.form.localidad,callback:function(t){e.$set(e.form,"localidad",t)},expression:"form.localidad"}})],1),e._v(" "),e.isAProfessional?[r("v-flex",{attrs:{xs12:"","ma-2":"","mt-2":""}},[r("v-layout",{attrs:{wrap:"","align-center":"","mt-2":"","fill-height":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{"align-center":""}},[r("v-flex",[r("v-select",{attrs:{dense:"","hide-details":"",items:e.habilidades,"item-text":"nombre","item-value":"_id",label:"Profesiones",loading:0===e.habilidades.length,multiple:"",outlined:"",readonly:e.loading,rules:[n.required()]},model:{value:e.form.servicios,callback:function(t){e.$set(e.form,"servicios",t)},expression:"form.servicios"}})],1),e._v(" "),e.loadLikeProfessional?e._e():r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{color:"red",icon:""},on:{click:e.setLikeCliente}},n),[r("v-icon",[e._v("delete")])],1)]}}],null,!0)},[e._v(" "),r("span",[e._v("Darme de baja como trabajador")])])],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{dense:"","hide-details":"",label:"Número de matrícula",outlined:"",readonly:e.loading,rules:[n.alphaSpacesNumLodash()]},model:{value:e.form.matricula,callback:function(t){e.$set(e.form,"matricula",t)},expression:"form.matricula"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:"","ma-2":"","mt-2":""}},[r("FieldTextArea",{attrs:{placeholder:"Bibliografía, cuenta algo que resulta útil para el cliente, como trabajas, lo que se te da bien, servicio distintivo a otros profesional."},model:{value:e.form.bibliography,callback:function(t){e.$set(e.form,"bibliography",t)},expression:"form.bibliography"}})],1)]:r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"primary",text:"",block:""},on:{click:e.setLikeProfesional}},[e._v("\n        Darme de alta como trabajador\n      ")])],1)]}},{key:"actions",fn:function(){return[r("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:e.close}},[e._v("Cancelar ")]),e._v(" "),r("v-btn",{attrs:{disabled:e.loading,color:"primary",type:"submit"}},[e._v(" Guardar ")])]},proxy:!0}])})}),[],!1,null,null,null);t.a=component.exports;y()(component,{VBtn:_.a,VFlex:j.a,VIcon:w.a,VLayout:k.a,VSelect:O.a,VTextField:C.a,VTooltip:E.a})},577:function(e,t,r){"use strict";r.r(t);r(14),r(12),r(7),r(6),r(10),r(176),r(44),r(60),r(69),r(28),r(34);var n=r(3),o=(r(58),r(18)),l=r(466),c=r(50),d=r(142),f=r(471),v=r(27),m=r(42),h=r.n(m),x=r(101),y=r(39),_=r(453),j=r(108),component=Object(v.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return[r("v-card",{staticClass:"my-4",attrs:{outlined:"",elevation:n?1:0},on:{click:function(t){return e.$emit("click")}}},[r("v-card-text",{staticClass:"text-center py-4"},[r("v-icon",{attrs:{size:"120",color:"grey lighten-1"}},[e._v(" add_circle_outline ")]),e._v(" "),r("p",{staticClass:"headline mb-1"},[e._v("Publicar trabajo realizado.")])],1)],1)]}}])})}),[],!1,null,null,null),w=component.exports;h()(component,{VCard:x.a,VCardText:y.b,VHover:_.a,VIcon:j.a});var k=r(489),O=r(478),C=r(174),E=r(459);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var T={components:{CardTrabajo:k.a,CardTrabajoAdd:w,ModalPublicJob:O.a},props:{showAddBtn:{type:Boolean,default:!1},profilId:{type:String,required:!0}},data:function(){return{loadingTrabajos:!0,listTrabajos:[],showModal:!1,selectedJob:null}},computed:{},mounted:function(){this.getTrabajos()},methods:{getTrabajos:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingTrabajos=!0,r={query:{profesional:e.profilId,tipo:C.TipoTrabajo.PUBLICO},populate:"servicios,localidad,cliente,profesional",sort:"-createdAt"},t.next=4,E.e.get(r);case 4:n=t.sent,data=n.data,e.listTrabajos=data||[],e.loadingTrabajos=!1;case 8:case"end":return t.stop()}}),t)})))()},editJob:function(e){this.selectedJob=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e),this.showModal=!0}}},R=r(449),A=r(450),D=r(196),S=Object(v.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:"","justify-start":"","mt-4":""}},[r("v-layout",{attrs:{"fill-height":""}},[r("v-flex",[r("p",{staticClass:"headline mb-0"},[e._v("Trabajos")])])],1),e._v(" "),r("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.loadingTrabajos,expression:"loadingTrabajos"}],attrs:{"my-4":""}},[r("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{width:"2",indeterminate:"",active:"",color:"grey darken-1"}})],1)],1),e._v(" "),e.loadingTrabajos?e._e():r("v-layout",{attrs:{column:""}},[e.showAddBtn?r("v-flex",{attrs:{xs12:""}},[r("CardTrabajoAdd",{on:{click:function(t){return e.editJob()}}})],1):e._e(),e._v(" "),e._l(e.listTrabajos,(function(t,n){return r("v-flex",{key:n,attrs:{xs12:""}},[r("CardTrabajo",{attrs:{trabajo:t},on:{edit:function(r){return e.editJob(t)}}})],1)}))],2),e._v(" "),r("ModalPublicJob",{attrs:{trabajo:e.selectedJob},on:{change:e.getTrabajos},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}})],1)}),[],!1,null,null,null),$=S.exports;h()(S,{VFlex:R.a,VLayout:A.a,VProgressCircular:D.a});var I=r(495),M=r(515),N=r(222),V=r(175),L=r.n(V);function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var H={middleware:"if_token_get_user",components:{PerfilTrabajosList:$,ModalProfesional:M.a,ModalContratar:I.a,Avatar:d.a,Rating:f.a},validate:function(e){var t=e.params;return!0===Object(N.a)()(t.id)},filters:{camelCase:function(e){return L()(e)}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,d,f,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.params,n=e.store,o=e.redirect,l=e.$vuetify,c=l.breakpoint.lgAndUp,d=l.breakpoint.mdAndDown,void 0!==r.id){t.next=11;break}if(!n.getters.isLoggedIn){t.next=8;break}return t.abrupt("return",{perfil:n.state.user,showBtnEditable:!0,lgAndUp:c,mdAndDown:d});case 8:o("/login");case 9:t.next=20;break;case 11:return t.next=13,E.d.getById(r.id,{populate:"servicios,localidad"});case 13:if(f=t.sent,!(data=f.data)){t.next=19;break}return t.abrupt("return",{perfil:data,showBtnEditable:!1,lgAndUp:c,mdAndDown:d});case 19:o("/trabajos");case 20:case"end":return t.stop()}}),t)})))()},data:function(){return{loading:!1,showModalContrart:!1,showModalEdit:!1,habilidades:[],localidades:[],score:{},form:{},changeAvatar:!1,cantidadTrabajos:0,saveMark:!1}},layout:function(){return l.isMobile?"mobile":"default"},computed:B(B({},Object(c.c)(["isLoggedIn"])),{},{user:function(){return this.$store.state.user},headline:function(){var e=this.perfil.nombre||"",t=this.perfil.apellido||"";return L()(this.perfil.razon_social?this.razon_social+"(".concat(e," ").concat(t,")"):e+" "+t)},localidadNombre:function(){var e;return L()(null===(e=this.perfil.localidad)||void 0===e?void 0:e.nombre)},isAProfessional:function(){var e,t;return this.showBtnEditable?null===(e=this.form.roles)||void 0===e?void 0:e.includes(C.Roles.PROFESIONAL):null===(t=this.perfil.roles)||void 0===t?void 0:t.includes(C.Roles.PROFESIONAL)},showRating:function(){return this.score.total>=10},cantidadTrabajosLabel:function(){var text=this.isAProfessional?"realizados":"contratados";return"Trabajos ".concat(text,": ")+this.cantidadTrabajos},isInMarks:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.marks_professional.includes(this.perfil._id))||!1}}),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,d,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showBtnEditable&&e.loadForm(e.perfil),e.getScore(),t.next=4,E.c.getAll();case 4:return r=t.sent,n=r.data,e.localidades=n||[],t.next=9,E.b.getAll();case 9:return o=t.sent,l=o.data,e.habilidades=l||[],c={estado:C.EstadoTrabajo.TERMINADO},e.isAProfessional?c.profesional=e.perfil._id:c.cliente=e.perfil._id,t.next=16,E.e.count({query:c});case 16:d=t.sent,data=d.data,e.cantidadTrabajos=data.count||0;case 19:case"end":return t.stop()}}),t)})))()},methods:B(B(B({},Object(c.d)({updateUser:"SET_USER"})),Object(c.b)(["getMe"])),{},{loadForm:function(e){this.form=B({},e),this.form.roles=Array.from(e.roles)},changeUser:function(e){this.updateUser(e),this.loadForm(e),this.perfil=B({},e),this.localidad=e.localidad},getScore:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,data,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.e.get({query:{profesional:e.perfil._id,estado:C.EstadoTrabajo.TERMINADO}});case 2:r=t.sent,data=r.data,n=0,o=0,data.forEach((function(e){e.rating===C.RatingTrabajo.LIKE&&n++,e.rating===C.RatingTrabajo.DONT_LIKE&&o++})),l=n*(n+o)/100,e.score={total:data.length||0,like:n,dontLike:o,rating:l};case 9:case"end":return t.stop()}}),t)})))()},enableEmailNotify:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.form.notification=!e.form.notification,t.next=4,E.d.save(e.form);case 4:r=t.sent,data=r.data,(n=r.error)?e.$notify({type:"error",text:n}):e.changeUser(data),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMe();case 2:r=t.sent,data=r.data,e.changeUser(data),e.showModalEdit=!1;case 6:case"end":return t.stop()}}),t)})))()},close:function(){this.form=B({},this.perfil),this.showModalEdit=!1},contratar:function(){this.isLoggedIn?this.showModalContrart=!0:this.$router.replace({name:"login",query:{back:"search"}})},marker:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saveMark=!0,(r=B({},e.user)).marks_professional=Array.from(e.user.marks_professional),-1===(n=r.marks_professional.findIndex((function(t){return t===e.perfil._id})))?r.marks_professional.push(e.perfil._id):r.marks_professional.splice(n,1),t.next=7,E.d.save(r);case 7:o=t.sent,(l=o.error)?e.$notify({type:"error",text:l}):e.updateUser(r),e.saveMark=!1;case 11:case"end":return t.stop()}}),t)})))()}}),head:function(){return{title:this.headline+" - ContrataDos"}}},z=r(81),U=r(498),J=r(211),G=r(501),K=r(434),Y=Object(v.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:"","mb-2":""}},[r("div",{staticClass:"hidden-md-and-down",staticStyle:{"margin-top":"60px"}}),e._v(" "),r("div",{staticClass:"hidden-md-and-up",staticStyle:{"margin-top":"40px"}}),e._v(" "),r("v-layout",{attrs:{"mb-2":"","px-2":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm12:"",md10:"",lg8:"",xl6:"","mt-4":"","mb-2":""}},[r("v-layout",{attrs:{wrap:"","justify-center":"","align-start":""}},[r("v-flex",{attrs:{xs12:"",lg4:""}},[r("v-layout",{attrs:{column:"","align-center":""}},[r("Avatar",{staticClass:"ma-2",attrs:{size:"225",src:e.perfil.picture,editable:e.showBtnEditable,elevation:""},on:{change:e.changeUser}}),e._v(" "),e.isAProfessional&&e.lgAndUp?[e.showRating?r("Rating",{attrs:{value:e.score.rating,star:""}}):r("p",{staticClass:"mb-0 text-center"},[e._v("\n                Trabajos realizados insuficientes para obtener una\n                clasificación.\n              ")])]:e._e()],2)],1),e._v(" "),r("v-flex",{attrs:{xs12:"",lg8:""}},[r("div",{staticClass:"overline mt-2"},[e._v(e._s(e.cantidadTrabajosLabel))]),e._v(" "),r("v-layout",{attrs:{"align-center":"","mb-1":""}},[r("v-flex",[r("p",{staticClass:"headline mb-0",domProps:{textContent:e._s(e.headline)}})]),e._v(" "),e.showBtnEditable?[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:"",text:""},on:{click:e.enableEmailNotify}},n),[e.form.notification?r("v-icon",[e._v("\n                      notifications_active\n                    ")]):r("v-icon",[e._v("notifications_off")])],1)]}}],null,!1,1993620631)},[e._v(" "),r("span",[e._v("\n                  "+e._s(e.form.notification?"Deshabilitar ":"Habilitar ")+"\n                  notificaciones de email\n                ")])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:"",text:""},on:{click:function(t){t.stopPropagation(),e.showModalEdit=!0}}},n),[r("v-icon",[e._v("edit")])],1)]}}],null,!1,65167272)},[e._v("\n                Editar perfil\n              ")])]:e._e()],2),e._v(" "),e.isAProfessional?r("v-layout",{attrs:{"align-center":""}},e._l(e.perfil.servicios,(function(t,n){return r("v-chip",{key:n,staticClass:"mx-2",attrs:{outlined:""},domProps:{textContent:e._s(t.nombre)}})})),1):e._e(),e._v(" "),e.showBtnEditable?r("p",{staticClass:"my-1"},[e._v(e._s(e.perfil.email))]):e._e(),e._v(" "),r("div",{staticStyle:{"min-height":"85px"},domProps:{innerHTML:e._s(e.perfil.bibliography)}}),e._v(" "),r("v-layout",{attrs:{"align-center":"","justify-end":"","mt-2":""}},[r("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.localidadNombre,expression:"localidadNombre"}],attrs:{xs12:""}},[e._v("\n              Recide en "+e._s(e.localidadNombre)+"\n            ")]),e._v(" "),r("v-flex",{attrs:{"d-flex":""}},[r("v-layout",{attrs:{"justify-end":""}},[e.isLoggedIn&&!e.showBtnEditable?[e.mdAndDown?r("v-btn",{attrs:{color:"sencudary",icon:"",text:"",loading:e.saveMark},on:{click:function(t){return e.marker()}}},[e.isInMarks?r("v-icon",[e._v("bookmark")]):r("v-icon",[e._v("bookmark_border")])],1):r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{color:"sencudary",outlined:"",loading:e.saveMark},on:{click:function(t){return e.marker()}}},n),[e.isInMarks?r("v-icon",{attrs:{left:""}},[e._v("bookmark")]):r("v-icon",{attrs:{left:""}},[e._v("bookmark_border")]),e._v("\n                        Marcadores\n                      ")],1)]}}],null,!1,1081630495)},[e._v("\n                    "+e._s(e.isInMarks?"Sacar de ":"Agregar a ")+" marcadores\n                  ")])]:e._e(),e._v(" "),r("v-btn",{staticClass:"ml-2",attrs:{disabled:e.user._id===e.perfil._id,color:"red darken-4",outlined:""},on:{click:e.contratar}},[e._v("\n                  Contactar\n                ")])],2)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{"justify-center":"","align-start":"","mt-4":""}},[r("v-divider")],1),e._v(" "),e.isAProfessional?r("PerfilTrabajosList",{attrs:{"show-add-btn":e.showBtnEditable,"profil-id":e.perfil._id}}):e._e()],1),e._v(" "),r("v-dialog",{attrs:{width:"550"},model:{value:e.showModalEdit,callback:function(t){e.showModalEdit=t},expression:"showModalEdit"}},[e.showModalEdit?r("ModalProfesional",{on:{submit:e.submit,close:e.close}}):e._e()],1),e._v(" "),r("ModalContratar",{attrs:{perfil:e.perfil},model:{value:e.showModalContrart,callback:function(t){e.showModalContrart=t},expression:"showModalContrart"}})],1)],1)}),[],!1,null,null,null);t.default=Y.exports;h()(Y,{VBtn:z.a,VChip:U.a,VDialog:J.a,VDivider:G.a,VFlex:R.a,VIcon:j.a,VLayout:A.a,VTooltip:K.a})}}]);